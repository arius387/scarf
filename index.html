<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Student Business Club - Order Now</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html { scroll-behavior: smooth; }
    .fade-section { opacity: 0; transform: translateY(30px); transition: all 0.8s ease-out; }
    .fade-section.visible { opacity: 1; transform: translateY(0); }
    .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); justify-content: center; align-items: center; z-index: 1000; }
    .modal-content { background: #1f2937; padding: 2.5rem; border-radius: 1rem; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto; box-shadow: 0 25px 70px rgba(0,0,0,0.9); }
    .loading { pointer-events: none; opacity: 0.7; }
    .loading::after { content: ""; position: absolute; width: 24px; height: 24px; border: 4px solid #fff; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite; left: 50%; top: 50%; transform: translate(-50%,-50%); }
    @keyframes spin { to { transform: translate(-50%,-50%) rotate(360deg); } }

    /* Navbar link underline animation */
    .nav-link {
      position: relative;
      padding-bottom: 4px;
      color: #d1d5db;
      transition: color 0.3s ease;
      text-decoration: none;
    }
    .nav-link::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0%;
      height: 2px;
      background: #60a5fa;
      border-radius: 2px;
      transition: width 0.3s ease;
    }
    .nav-link:hover {
      color: #60a5fa;
    }
    .nav-link:hover::after {
      width: 100%;
    }
    .nav-link.active {
      color: #60a5fa;
    }
    .nav-link.active::after {
      width: 100%;
    }

    /* Mobile menu */
    #mobile-menu {
      display: none;
    }
    #mobile-menu.open {
      display: flex;
    }
  </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">

  <!-- Navbar -->
  <nav class="w-full bg-gray-800 fixed top-0 z-50 shadow-2xl backdrop-blur-md bg-opacity-95">
    <div class="flex justify-between items-center px-6 py-4 max-w-7xl mx-auto">
      <div class="text-2xl font-bold text-blue-400">Student Business Club</div>

      <!-- Desktop Nav -->
      <div class="hidden md:flex items-center space-x-10 text-lg">
        <a href="#home" class="nav-link active" id="nav-home">Home</a>
        <a href="#product" class="nav-link" id="nav-product">Product</a>
        <a href="#order" class="nav-link" id="nav-order">Order</a>
        <a href="#contact" class="nav-link" id="nav-contact">Contact</a>
      </div>

      <!-- Hamburger Button (mobile) -->
      <button id="hamburger" class="md:hidden flex flex-col justify-center items-center w-8 h-8 space-y-1.5 focus:outline-none" aria-label="Toggle menu">
        <span class="block w-6 h-0.5 bg-gray-300 transition-all duration-300" id="h-line1"></span>
        <span class="block w-6 h-0.5 bg-gray-300 transition-all duration-300" id="h-line2"></span>
        <span class="block w-6 h-0.5 bg-gray-300 transition-all duration-300" id="h-line3"></span>
      </button>
    </div>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="md:hidden flex-col px-6 pb-4 space-y-4 text-lg border-t border-gray-700">
      <a href="#home" class="nav-link block py-2" id="mnav-home">Home</a>
      <a href="#product" class="nav-link block py-2" id="mnav-product">Product</a>
      <a href="#order" class="nav-link block py-2" id="mnav-order">Order</a>
      <a href="#contact" class="nav-link block py-2" id="mnav-contact">Contact</a>
    </div>
  </nav>

  <!-- Home -->
  <section id="home" class="min-h-screen flex items-center justify-center p-6 fade-section visible">
    <div class="text-center max-w-4xl">
      <h1 class="text-5xl md:text-7xl font-extrabold mb-6 bg-gradient-to-r from-blue-400 via-cyan-400 to-blue-500 bg-clip-text text-transparent">
        Student Business Club
      </h1>
      <p class="text-xl md:text-2xl mb-10 text-gray-300">Handmade with love by students • Supporting real entrepreneurship</p>
      <a href="#order" class="inline-block px-10 py-5 bg-blue-600 text-xl font-bold rounded-full hover:bg-blue-700 transform hover:scale-110 transition duration-300 shadow-2xl">
        Order Products Now
      </a>
    </div>
  </section>

  <!-- Product (formerly About) -->
  <section id="product" class="min-h-screen flex items-center justify-center p-8 fade-section bg-gray-800">
    <div class="max-w-4xl text-center">
      <h2 class="text-5xl font-bold mb-8 text-blue-400">About Our Club</h2>
      <p class="text-xl leading-relaxed text-gray-300">
        We are a student-run business club that teaches real entrepreneurship by making and selling high-quality products like 
        <strong>liquid soap</strong> and <strong>fresh bread</strong>. Every order supports students learning real business skills!
      </p>
    </div>
  </section>

  <!-- Order Form -->
  <section id="order" class="min-h-screen flex flex-col items-center justify-center p-6 fade-section pt-20">
    <h2 class="text-5xl font-bold mb-12 text-blue-400">Place Your Order</h2>

    <form id="orderForm" class="w-full max-w-3xl bg-gray-800 p-10 rounded-3xl shadow-2xl border border-gray-700 space-y-8">
      <!-- Customer Info -->
      <div class="grid md:grid-cols-3 gap-6">
        <input type="text" name="name" placeholder="Your Full Name" class="p-4 rounded-xl bg-gray-700 text-lg" required />
        <input type="email" name="email" placeholder="Email Address" class="p-4 rounded-xl bg-gray-700 text-lg" required />
        <input type="tel" name="tel" placeholder="Phone Number (e.g. 078...)" class="p-4 rounded-xl bg-gray-700 text-lg" required />
      </div>

      <!-- Products -->
      <div class="space-y-8">
        <p class="text-2xl font-bold text-blue-300">Select Products & Quantity</p>

        <!-- Liquid Soap -->
        <div class="bg-gray-700 p-8 rounded-2xl border border-blue-500">
          <h3 class="text-2xl font-bold text-blue-300 mb-6">Liquid Soap</h3>
          <div class="space-y-6">
            <label class="flex items-center justify-between text-lg">
              <div class="flex items-center space-x-4">
                <input type="checkbox" id="soap3L" class="w-6 h-6">
                <span>3 Litres</span>
              </div>
              <div class="flex items-center space-x-3">
                <span class="font-bold text-green-400">2,500 RWF</span>
                <input type="number" id="soap3L_qty" min="1" placeholder="Qty" class="hidden w-24 p-3 rounded bg-gray-600 text-center" />
              </div>
            </label>

            <label class="flex items-center justify-between text-lg">
              <div class="flex items-center space-x-4">
                <input type="checkbox" id="soap5L" class="w-6 h-6">
                <span>5 Litres</span>
              </div>
              <div class="flex items-center space-x-3">
                <span class="font-bold text-green-400">4,000 RWF</span>
                <input type="number" id="soap5L_qty" min="1" placeholder="Qty" class="hidden w-24 p-3 rounded bg-gray-600 text-center" />
              </div>
            </label>
          </div>
        </div>

        <!-- Fresh Bread -->
        <div class="bg-gray-700 p-8 rounded-2xl border border-blue-500">
          <h3 class="text-2xl font-bold text-blue-300 mb-6">Fresh Bread</h3>
          <div class="space-y-6">
            <label class="flex items-center justify-between text-lg">
              <div class="flex items-center space-x-4">
                <input type="checkbox" id="bread10" class="w-6 h-6">
                <span>10-piece pack (small)</span>
              </div>
              <div class="flex items-center space-x-3">
                <span class="font-bold text-green-400">1,500 RWF</span>
                <input type="number" id="bread10_qty" min="1" placeholder="Qty" class="hidden w-24 p-3 rounded bg-gray-600 text-center" />
              </div>
            </label>

            <label class="flex items-center justify-between text-lg">
              <div class="flex items-center space-x-4">
                <input type="checkbox" id="bread6" class="w-6 h-6">
                <span>6-piece pack (large)</span>
              </div>
              <div class="flex items-center space-x-3">
                <span class="font-bold text-green-400">2,000 RWF</span>
                <input type="number" id="bread6_qty" min="1" placeholder="Qty" class="hidden w-24 p-3 rounded bg-gray-600 text-center" />
              </div>
            </label>
          </div>
        </div>
      </div>

      <button type="button" id="confirmOrderBtn" class="w-full py-5 bg-gradient-to-r from-blue-600 to-cyan-600 text-2xl font-bold rounded-xl hover:from-blue-700 hover:to-cyan-700 transform hover:scale-105 transition duration-300 shadow-2xl">
        Review My Order
      </button>
    </form>

    <!-- Confirmation Modal -->
    <div id="orderModal" class="modal">
      <div class="modal-content text-gray-200">
        <h3 class="text-3xl font-bold mb-6 text-blue-400 text-center">Confirm Your Order</h3>
        <div id="orderSummary" class="space-y-4 text-lg"></div>
        <div class="mt-8 pt-6 border-t-2 border-gray-600">
          <div class="text-3xl font-bold text-right text-green-400" id="totalPrice">Total: 0 RWF</div>
        </div>
        <div class="flex justify-between mt-10">
          <button id="cancelOrder" class="px-8 py-4 bg-gray-600 rounded-xl text-xl hover:bg-gray-700 transition">Cancel</button>
          <button id="submitOrder" class="relative px-10 py-4 bg-green-600 rounded-xl text-xl font-bold hover:bg-green-700 transform hover:scale-110 transition shadow-2xl">
            Confirm & Send Order
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="min-h-screen flex items-center justify-center p-8 fade-section bg-gray-800">
    <div class="max-w-2xl w-full bg-gray-800 p-10 rounded-3xl shadow-2xl border border-gray-700">
      <h2 class="text-5xl font-bold mb-10 text-center text-blue-400">Get in Touch</h2>
      <p class="text-center text-lg mb-8 text-gray-300">Have questions? Reach out to us!</p>
      <div class="text-center space-y-4 text-xl">
        <p>Phone: <strong>078 123 4567</strong></p>
        <p>Email: <strong>studentclub@example.com</strong></p>
      </div>
    </div>
  </section>

  <script>
    // ── Smooth scroll ──────────────────────────────────────────────────────────
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', e => {
        e.preventDefault();
        const target = document.querySelector(anchor.getAttribute('href'));
        if (target) target.scrollIntoView({ behavior: 'smooth' });
        // Close mobile menu on link click
        mobileMenu.classList.remove('open');
      });
    });

    // ── Fade-in on scroll ─────────────────────────────────────────────────────
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) entry.target.classList.add('visible');
      });
    }, { threshold: 0.1 });
    document.querySelectorAll('.fade-section').forEach(el => observer.observe(el));

    // ── Active nav link on scroll ─────────────────────────────────────────────
    const sections = ['home', 'product', 'order', 'contact'];
    const navLinks = {
      desktop: {
        home: document.getElementById('nav-home'),
        product: document.getElementById('nav-product'),
        order: document.getElementById('nav-order'),
        contact: document.getElementById('nav-contact'),
      },
      mobile: {
        home: document.getElementById('mnav-home'),
        product: document.getElementById('mnav-product'),
        order: document.getElementById('mnav-order'),
        contact: document.getElementById('mnav-contact'),
      }
    };

    function setActiveNav(id) {
      ['desktop', 'mobile'].forEach(type => {
        sections.forEach(s => {
          navLinks[type][s].classList.toggle('active', s === id);
        });
      });
    }

    const sectionObserver = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) setActiveNav(entry.target.id);
      });
    }, { threshold: 0.4 });

    sections.forEach(id => {
      const el = document.getElementById(id);
      if (el) sectionObserver.observe(el);
    });

    // ── Hamburger toggle ──────────────────────────────────────────────────────
    const hamburger = document.getElementById('hamburger');
    const mobileMenu = document.getElementById('mobile-menu');
    const hLine1 = document.getElementById('h-line1');
    const hLine2 = document.getElementById('h-line2');
    const hLine3 = document.getElementById('h-line3');

    hamburger.addEventListener('click', () => {
      const isOpen = mobileMenu.classList.toggle('open');
      // Animate hamburger → X
      hLine1.style.transform = isOpen ? 'translateY(8px) rotate(45deg)' : '';
      hLine2.style.opacity = isOpen ? '0' : '1';
      hLine3.style.transform = isOpen ? 'translateY(-8px) rotate(-45deg)' : '';
    });

    // ── Quantity visibility ───────────────────────────────────────────────────
    ['soap3L', 'soap5L', 'bread10', 'bread6'].forEach(id => {
      document.getElementById(id).addEventListener('change', function () {
        const qty = document.getElementById(id + '_qty');
        qty.classList.toggle('hidden', !this.checked);
        if (this.checked) qty.focus();
      });
    });

    const MAKE_WEBHOOK = "https://hook.us2.make.com/ygz8rqdikqtsgsrpe43pqy5249vnvnyj";

    // ── Review Order ──────────────────────────────────────────────────────────
    document.getElementById('confirmOrderBtn').addEventListener('click', () => {
      const name = document.querySelector('[name="name"]').value.trim();
      const email = document.querySelector('[name="email"]').value.trim();
      const phone = document.querySelector('[name="tel"]').value.trim();
      if (!name || !email || !phone) return alert("Please fill in your name, email, and phone.");

      const s3  = parseInt(document.getElementById('soap3L_qty').value)  || 0;
      const s5  = parseInt(document.getElementById('soap5L_qty').value)  || 0;
      const b10 = parseInt(document.getElementById('bread10_qty').value) || 0;
      const b6  = parseInt(document.getElementById('bread6_qty').value)  || 0;

      if (s3 + s5 + b10 + b6 === 0) return alert("Please select at least one product.");

      const items = [];
      let total = 0;
      if (s3  > 0) { items.push(`Liquid Soap 3L × ${s3}  = ${(s3*2500).toLocaleString()} RWF`);  total += s3*2500;  }
      if (s5  > 0) { items.push(`Liquid Soap 5L × ${s5}  = ${(s5*4000).toLocaleString()} RWF`);  total += s5*4000;  }
      if (b10 > 0) { items.push(`Bread 10-piece × ${b10} = ${(b10*1500).toLocaleString()} RWF`); total += b10*1500; }
      if (b6  > 0) { items.push(`Bread 6-piece large × ${b6} = ${(b6*2000).toLocaleString()} RWF`); total += b6*2000; }

      document.getElementById('orderSummary').innerHTML = `
        <p><strong>Name:</strong> ${name}</p>
        <p><strong>Email:</strong> ${email}</p>
        <p><strong>Phone:</strong> ${phone}</p>
        <hr class="my-4 border-gray-500">
        <p class="text-2xl font-bold text-blue-300 mb-3">Your Order:</p>
        ${items.map(i => `<p class="text-lg">• ${i}</p>`).join('')}
      `;
      document.getElementById('totalPrice').textContent = `Total: ${total.toLocaleString()} RWF`;
      document.getElementById('orderModal').style.display = 'flex';
    });

    // ── Submit to Make.com ────────────────────────────────────────────────────
    document.getElementById('submitOrder').addEventListener('click', async () => {
      const btn = document.getElementById('submitOrder');
      btn.classList.add('loading');
      btn.innerHTML = 'Sending...';

      const payload = {
        name:        document.querySelector('[name="name"]').value.trim(),
        email:       document.querySelector('[name="email"]').value.trim(),
        phone:       document.querySelector('[name="tel"]').value.trim(),
        soap_3L:     parseInt(document.getElementById('soap3L_qty').value)  || 0,
        soap_5L:     parseInt(document.getElementById('soap5L_qty').value)  || 0,
        bread_10pack:parseInt(document.getElementById('bread10_qty').value) || 0,
        bread_6pack: parseInt(document.getElementById('bread6_qty').value)  || 0,
        total: (
          (parseInt(document.getElementById('soap3L_qty').value)  || 0) * 2500 +
          (parseInt(document.getElementById('soap5L_qty').value)  || 0) * 4000 +
          (parseInt(document.getElementById('bread10_qty').value) || 0) * 1500 +
          (parseInt(document.getElementById('bread6_qty').value)  || 0) * 2000
        ) + " RWF",
        submitted_at: new Date().toLocaleString('en-GB', { timeZone: 'Africa/Kigali' })
      };

      try {
        const res = await fetch(MAKE_WEBHOOK, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(payload) });
        if (res.ok) {
          alert("Order sent successfully! We will contact you soon.");
          document.getElementById('orderModal').style.display = 'none';
          document.getElementById('orderForm').reset();
          document.querySelectorAll('input[type="number"]').forEach(i => i.classList.add('hidden'));
          document.querySelectorAll('input[type="checkbox"]').forEach(c => c.checked = false);
        } else alert("Failed. Try again.");
      } catch (err) {
        alert("No internet connection. Try again when online daje.");
      } finally {
        btn.classList.remove('loading');
        btn.innerHTML = 'Confirm & Send Order';
      }
    });

    document.getElementById('cancelOrder').addEventListener('click', () => {
      document.getElementById('orderModal').style.display = 'none';
    });
  </script>
</body>
</html>
